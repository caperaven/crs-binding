function t(t,i){const s=`_${i}`;return null!=t[s]?t[s]:crsbinding.data.getValue(t._dataId,i)}class i extends HTMLElement{constructor(){super(),this._dataId=crsbinding.data.addObject(this.constructor.name),crsbinding.data.addContext(this._dataId,this),crsbinding.dom.enableEvents(this),this.__properties=new Map}dispose(){this._disposing=!0,crsbinding.dom.disableEvents(this)}async connectedCallback(){if(null!=this.preLoad){const t=(t,i)=>{crsbinding.data.setProperty(this._dataId,t,i)};await this.preLoad(t)}null!=this.html&&(this.innerHTML=await fetch(this.html).then(t=>t.text()),crsbinding.parsers.parseElements(this.children,this._dataId)),requestAnimationFrame(()=>{const t=this.getAttribute("name");null!=t&&crsbinding.data.setName(this._dataId,t)}),this.__properties.forEach((t,i)=>crsbinding.data.setProperty(this._dataId,i,t)),this.__properties.clear(),delete this.__properties,null!=this.load&&this.load(),this.isReady=!0,this.dispatchEvent(new CustomEvent("ready"))}async disconnectedCallback(){this.dispose(),crsbinding.utils.disposeProperties(this),crsbinding.observation.releaseBinding(this),crsbinding.data.removeObject(this._dataId)}getProperty(i){return t(this,i)}setProperty(i,s,e=!1){if(1!=this.isReady&&!1===e&&this.__properties)return this.__properties.set(i,s);!function(i,s,e){let a;e&&null!=e.__uid&&(a=t(i,s),a&&crsbinding.data.unlinkArrayItem(a)),crsbinding.data.setProperty(i._dataId,s,e),Array.isArray(e)&&(i[`_${s}`]=crsbinding.data.array(i._dataId,s)),e&&e.__uid&&crsbinding.data.linkToArrayItem(i._dataId,s,e.__uid)}(this,i,s)}}export{i as BindableElement};
