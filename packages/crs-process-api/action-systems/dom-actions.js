import"./action-actions.js";class d{static async perform(e, t, a, r){await this[e.action]?.(e,t,a,r)}static async set_attribute(e, t, a, r){(await crs.dom.get_element(e.args.element,t,a,r)).setAttribute(e.args.attr,await crs.process.getValue(e.args.value,t,a,r))}static async get_attribute(e, t, a, r){const l=(await crs.dom.get_element(e.args.element,t,a,r))?.getAttribute(e.args.attr);return e.args.target!=null&&await crs.process.setValue(e.args.target,l,t,a,r),l}static async add_class(e, t, a, r){const n=await crs.dom.get_element(e.args.element,t,a,r),l=await crs.process.getValue(e.args.value,t,a,r);let c=Array.isArray(l)==!0?l:[l];n.classList.add(...c)}static async remove_class(e, t, a, r){const n=await crs.dom.get_element(e.args.element,t,a,r),l=await crs.process.getValue(e.args.value,t,a,r);let c=Array.isArray(l)==!0?l:[l];n.classList.remove(...c)}static async set_style(e, t, a, r){const n=await crs.dom.get_element(e.args.element,t,a,r);n.style[e.args.style]=await crs.process.getValue(e.args.value,t,a,r)}static async set_styles(e, t, a, r){const n=await crs.dom.get_element(e.args.element,t,a,r);for(let l of Object.keys(e.args.styles))n.style[l]=await crs.process.getValue(e.args.styles[l],t,a,r)}static async get_style(e, t, a, r){const l=(await crs.dom.get_element(e.args.element,t,a,r))?.style[e.args.style];return e.args.target!=null&&await crs.process.setValue(e.args.target,l,t,a,r),l}static async set_text(e, t, a, r){const n=await crs.dom.get_element(e.args.element,t,a,r);n.textContent=await crs.process.getValue(e.args.value,t,a,r)}static async get_text(e, t, a, r){const l=(await crs.dom.get_element(e.args.element,t,a,r)).textContent;return e.args.target!=null&&await crs.process.setValue(e.args.target,l,t,a,r),l}static async get_element(e, t, a, r){if(e==null)return null;if(e instanceof HTMLElement||e instanceof DocumentFragment||e._dataId!=null)return e;if(typeof e=="string")return document.querySelector(e);let n=await crs.process.getValue(e.args.element,t,a,r);return typeof n=="string"&&(n=document.querySelector(n)),e.args.target!=null&&await crs.process.setValue(e.args.target,n,t,a,r),n}static async create_element(e, t, a, r){const n=await crs.dom.get_element(e.args.parent,t,a,r),l=document.createElement(e.args.tag_name||"div"),c=Object.keys(e.args.attributes||{}),o=Object.keys(e.args.styles||{}),m=e.args.classes||[],u=Object.keys(e.args.dataset||{});for(let s of c)l.setAttribute(s,await crs.process.getValue(e.args.attributes[s],t,a,r));for(let s of o)l.style[s]=await crs.process.getValue(e.args.styles[s],t,a,r);for(let s of m)l.classList.add(s);for(let s of u)l.dataset[s]=await crs.process.getValue(e.args.dataset[s],t,a,r);if(e.args.text_content!=null&&(l.textContent=await crs.process.getValue(e.args.text_content,t,a,r)),e.args.id!=null&&(l.id=e.args.id),e.args.children!=null)for(let s of e.args.children)s.parent=l,await this.create_element({args:s},t,a,r);return n?.content!=null?n.content.appendChild(l):n?.appendChild(l),e.args.target!=null&&await crs.process.setValue(e.args.target,l,t,a,r),l}static async remove_element(e, t, a, r){const n=await crs.dom.get_element(e.args.element,t,a,r);n?.parentElement?.removeChild(n),await crsbinding.providerManager.releaseElement(n)}static async clear_element(e, t, a, r){const n=await crs.dom.get_element(e.args.element,t,a,r);if(n!=null)for(await crsbinding.observation.releaseChildBinding(n); n.firstChild!=null;)n.removeChild(n.firstChild)}static async move_element(e, t, a, r){const n=await crs.dom.get_element(e.args.element,t,a,r),l=await crs.dom.get_element(e.args.target,t,a,r);await g(n,l,e.args.position)}static async move_element_down(e, t, a, r){const n=await crs.dom.get_element(e.args.element,t,a,r),l=n.nextElementSibling;l!=null&&await g(n,l,"after")}static async move_element_up(e, t, a, r){const n=await crs.dom.get_element(e.args.element,t,a,r),l=n.previousElementSibling;l!=null&&await g(n,l,"before")}}async function g(i, e, t){if(i==null||e==null)return console.error("both element and parent must exist to move the element");if(i.parentElement.removeChild(i),t==null)return e.appendChild(i);if(t=="before")return e.parentElement.insertBefore(i,e);if(e.nextSibling==null)return e.parentElement.appendChild(i);e.parentElement.insertBefore(i,e.nextSibling)}crs.intent.dom=d;export{d as DomActions};
