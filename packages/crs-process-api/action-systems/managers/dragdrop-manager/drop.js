async function w(t,a,l,e,c){const o=await p(t,a,e);let s=!0;if(e.drop.allowCallback)if(typeof e.drop.allowCallback=="object"){const r=e.drop.allowCallback;s=await crs.call(r.type,r.action,r.args,c,null,{dragElement:a,targetElement:o})}else s=await e.drop.allowCallback(a,o)==!0;if(o==!1||s==!1?await n(a,l,e):await i(t,a,o,e,l),y(a,l,e),s&&e.drop.callback)if(typeof e.drop.callback=="object"){const r=e.drop.callback;await crs.call(r.type,r.action,r.args,c,null,{dragElement:a,targetElement:o})}else await e.drop.callback(a,o)}async function n(t,a,l){if(await u(t,a._bounds),t._dragElement!=null){const e=t._dragElement;delete t._dragElement,t=e}l.drag.clone=="element"&&a.parentElement.replaceChild(t,a)}async function i(t,a,l,e,c){switch(l.appendChild(a),e.drop.action){case"move":{c.parentElement.removeChild(c);break}}}function u(t,a){return new Promise(l=>{const e=setTimeout(()=>{t.style.transition="translate 0.3s ease-out",t.style.translate=`${a.x}px ${a.y}px`}),c=setTimeout(()=>{clearTimeout(e),clearTimeout(c),t.parentElement.removeChild(t),l()},350)})}function y(t,a,l){delete t._bounds,t.style.width="",t.style.height="",t.style.rotate="",t.style.translate="",t.style.transition="",t.style.filter="",l.drag?.placeholderType=="opacity"&&l.drop?.action=="copy"&&(a.style.opacity=1),delete a._bounds}async function p(t,a,l){return f[typeof l.drop.allowDrop](t,l)}class f{static async string(a,l){const e=a.path[0];return e.matches(l.drop.allowDrop)?e:e.parentElement?.matches(l.drop.allowDrop)?e.parentElement:!1}static async function(a,l){return await l.drop.allowDrop(a)}static async object(a){}}export{w as drop};
