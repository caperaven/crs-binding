import{getDraggable as n}from "./dragdrop-manager/drag-utils.js";class _{constructor(t, e, o){this._element=t,this._resizeQuery=e,this._options=o,this._mouseDownHandler=this.mouseDown.bind(this),this._mouseMoveHandler=this.mouseMove.bind(this),this._mouseUpHandler=this.mouseUp.bind(this),this._element.addEventListener("mousedown",this._mouseDownHandler),t.__resizeManager=this}dispose(){this._element.removeEventListener("mousedown",this._mouseDownHandler),this._mouseDownHandler=null,this._mouseMoveHandler=null,this._mouseUpHandler=null,delete this._element.__resizeManager,delete this._element,delete this._resizeQuery,delete this._options}mouseDown(t){const e=n(t,{dragQuery:this._resizeQuery});e!=null&&(this._targetElement=e.parentElement,this._bounds=this._targetElement.getBoundingClientRect(),this._startPos={x:t.clientX,y:t.clientY},this._options.min=this._options.min||{},this._options.min.width=this._options.min.width||this._bounds.width,this._options.min.height=this._options.min.height||this._bounds.height,this._options.max=this._options.max||{},this._options.max.width=this._options.max.width||Number.MAX_VALUE,this._options.max.height=this._options.max.height||Number.MAX_VALUE,document.addEventListener("mousemove",this._mouseMoveHandler),document.addEventListener("mouseup",this._mouseUpHandler))}mouseMove(t){let e=t.clientX-this._startPos.x,o=t.clientY-this._startPos.y;this._options.lock_axis=="x"&&(o=0),this._options.lock_axis=="y"&&(e=0);let i=this._bounds.width+e,s=this._bounds.height+o;i=i<this._options.min.width?this._options.min.width:i>this._options.max.width?this._options.max.width:i,s=s<this._options.min.height?this._options.min.height:s>this._options.max.height?this._options.max.height:s,this._targetElement.style.width=`${i}px`,this._targetElement.style.height=`${s}px`}mouseUp(t){document.removeEventListener("mousemove",this._mouseMoveHandler),document.removeEventListener("mouseup",this._mouseUpHandler),delete this._targetElement,this._bounds=null,this._startPos=null}}export{_ as ResizeElementManager};
