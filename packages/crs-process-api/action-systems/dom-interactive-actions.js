class u{static async perform(e,t,a,s){await this[e.action]?.(e,t,a,s)}static async get_animation_layer(e,t,a,s){const n=document.querySelector("#animation-layer");if(n!=null)return n;const i=await crs.call("dom","create_element",{parent:document.body,tag_name:"div",id:"animation-layer",dataset:{layer:"animation"},styles:{position:"fixed",inset:0,zIndex:9999999999,background:"transparent",pointerEvents:"none"}},t,a,s);return e?.args?.target!=null&&await crs.process.setValue(e.args.target,i,t,a,s),i}static async clear_animation_layer(e,t,a,s){const n=document.querySelector("#animation-layer");n!=null&&(n.innerHTML="")}static async remove_animation_layer(e,t,a,s){const n=document.querySelector("#animation-layer");n?.parentElement?.removeChild(n)}static async highlight(e,t,a,s){const n=await this.get_animation_layer(),l=(await crs.dom.get_element(e.args.target,t,a,s)).getBoundingClientRect(),r=await crs.process.getValue(e.args.classes,t,a,s),m=await crs.process.getValue(e.args.duration,t,a,s)||0,g=await crs.process.getValue(e.args.template,t,a,s);let c;const o={position:"fixed",left:`${l.left}px`,top:`${l.top}px`,width:`${l.width}px`,height:`${l.height}px`};if(g!=null?(c=g.content.cloneNode(!0).children[0],await crs.call("dom","set_styles",{element:c,styles:o}),r!=null&&c.classList.add(...r),n.appendChild(c)):c=await crs.call("dom","create_element",{parent:n,tag_name:"div",styles:o,classes:r}),m>0){const d=setTimeout(()=>{clearTimeout(d),c?.parentElement?.removeChild(c)},m)}}static async clone_for_movement(e,t,a,s){const n=await crs.dom.get_element(e.args.element,t,a,s),i=await crs.dom.get_element(e.args.parent,t,a,s),l=await crs.process.getValue(e.args.position||{x:0,y:0},t,a,s),r=n.cloneNode(!0),m=Object.keys(e.args.attributes||{}),g=Object.keys(e.args.styles||{}),c=e.args.classes||[];for(let o of m)r.setAttribute(o,await crs.process.getValue(e.args.attributes[o],t,a,s));for(let o of g)r.style[o]=await crs.process.getValue(e.args.styles[o],t,a,s);for(let o of c)r.classList.add(o);return i!=null&&(i.appendChild(r),r.style.position="absolute",r.style.transform=`translate(${l.x}px, ${l.y}px)`),r}static async enable_resize(e,t,a,s){const n=await crs.dom.get_element(e.args.element,t,a,s),i=await crs.process.getValue(e.args.resize_query,t,a,s),l=await crs.process.getValue(e.args.options,t,a,s),m=await import(import.meta.url.replace("dom-interactive-actions.js","managers/resize-element-manager.js"));new m.ResizeElementManager(n,i,l)}static async disable_resize(e,t,a,s){(await crs.dom.get_element(e.args.element,t,a,s)).__resizeManager?.dispose()}static async enable_dragdrop(e,t,a,s){const n=await crs.process.getValue(e.args.options,t,a,s),i=await crs.dom.get_element(e.args.element,t,a,s),r=await import(import.meta.url.replace("dom-interactive-actions.js","managers/dragdrop-manager.js"));new r.DragDropManager(i,n)}static async disable_dragdrop(e,t,a,s){(await crs.dom.get_element(e.args.element,t,a,s)).__dragDropManager?.dispose()}}crs.intent.dom_interactive=u;export{u as DomInteractiveActions};
