<!doctype html>
<html lang="en">
<body>
    <div id="name"></div>
    <div id="lastName"></div>
    <button id="btnChange">Change</button>

    <script>
        const btn = document.querySelector("#btnChange");
        btn.addEventListener("click", () => {
            window.obj.firstName = "Hello";
            crsbinding.observation.releaseObserved(window.obj);
        });

        function loaded() {
            window.obj = crsbinding.observation.observe({
                firstName: "name",
                lastName: "lastName",
                firstNameChanged: () => {console.log(window.obj.firstName)}
            });

            crsbinding.events.on(window.obj, "firstName", () => document.querySelector("#name").innerText = window.obj.firstName);
            crsbinding.events.on(window.obj, "lastName", () => document.querySelector("#lastName").innerText = window.obj.lastName);

            window.obj.firstName = "John";
            window.obj.lastName = "Doe";
        }
    </script>

    <script src="./../src/index.js" onload="loaded()" type="module"></script>
</body>
</html>